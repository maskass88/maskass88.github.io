<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>EzzineStyle - متجر تيشيرتات</title>
<style>
  body {
    background: white;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    color: #333;
    margin: 0; padding: 0; line-height: 1.6;
  }
  header {
    text-align: center;
    padding: 2rem 1rem;
    background: #f8f9fa;
    border-bottom: 1px solid #eaeaea;
  }
  .logo {
    font-size: 2.5rem;
    font-weight: bold;
    color: #1a56db;
    margin-bottom: 0.5rem;
  }
  .welcome {
    font-size: 1.5rem;
    margin-bottom: 0.5rem;
    color: #444;
  }
  .tagline {
    font-size: 1.1rem;
    color: #666;
  }
  h2.section-title {
    max-width: 1400px;
    margin: 2rem auto 1rem;
    padding: 0 1rem;
    font-weight: bold;
    color: #1a56db;
  }
  .products-grid {
    max-width: 1400px;
    margin: 0 auto 3rem;
    display: grid;
    grid-template-columns: repeat(auto-fill,minmax(280px,1fr));
    gap: 1.8rem;
    padding: 0 1rem;
  }
  .product-card {
    background: white;
    border-radius: 10px;
    box-shadow: 0 4px 6px rgb(0 0 0 / 0.1);
    overflow: hidden;
    display: flex;
    flex-direction: column;
  }
  .product-image {
    width: 100%;
    height: 280px;
    object-fit: cover;
    border-bottom: 1px solid #eee;
    background: #f7f7f7;
  }
  .product-info {
    padding: 1rem 1.2rem;
    flex-grow: 1;
    display: flex;
    flex-direction: column;
  }
  .product-model {
    font-weight: bold;
    font-size: 1.15rem;
    margin-bottom: 0.5rem;
    color: #222;
  }
  .type-switch {
    margin-bottom: 0.7rem;
    display: flex;
    gap: 1rem;
  }
  .type-option {
    cursor: pointer;
    padding: 0.3rem 1.1rem;
    border-radius: 20px;
    font-size: 0.95rem;
    border: 2px solid #eee;
    background: #f6f6f6;
    color: #444;
    transition: all 0.2s;
    font-weight: 600;
    user-select: none;
  }
  .type-option.selected, .type-option:hover {
    border-color: #1a56db;
    background: #e0e7ff;
    color: #1a56db;
  }
  .product-price {
    font-weight: bold;
    font-size: 1.25rem;
    margin: 0.4rem 0 1rem;
    color: #1a56db;
  }
  .buy-button {
    width: 100%;
    background-color: #1a56db;
    color: white;
    border: none;
    border-radius: 5px;
    padding: 0.8rem;
    font-weight: bold;
    font-size: 1rem;
    cursor: pointer;
    transition: background-color 0.3s;
    margin-top: auto;
  }
  .buy-button:hover {
    background-color: #1e40af;
  }
  .whatsapp-button {
    position: fixed;
    bottom: 30px;
    left: 30px;
    width: 60px;
    height: 60px;
    background: #25d366;
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    box-shadow: 0 4px 8px rgb(0 0 0 / 0.2);
    z-index: 9999;
    transition: transform 0.3s, box-shadow 0.3s;
  }
  .whatsapp-button:hover {
    transform: scale(1.1);
    box-shadow: 0 6px 12px rgb(0 0 0 / 0.3);
  }
  .whatsapp-icon {
    width: 36px;
    height: 36px;
    filter: brightness(0) invert(1);
  }
  .modal {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.7);
    z-index: 10000;
    overflow-y: auto;
    justify-content: center;
    align-items: center;
  }
  .modal.show {
    display: flex;
  }
  .modal-content {
    background: white;
    max-width: 600px;
    width: 95%;
    border-radius: 10px;
    box-shadow: 0 5px 15px rgb(0 0 0 / 0.3);
    animation: modalopen 0.4s ease forwards;
    padding-bottom: 1.5rem;
  }
  @keyframes modalopen {
    from {opacity:0; transform: translateY(-50px);}
    to {opacity:1; transform: translateY(0);}
  }
  .modal-header {
    background: #1a56db;
    color: white;
    padding: 1.2rem 1.5rem;
    border-top-left-radius: 10px;
    border-top-right-radius: 10px;
    position: relative;
    font-size: 1.4rem;
    font-weight: bold;
  }
  .close-modal {
    position: absolute;
    top: 15px;
    left: 15px;
    font-size: 1.8rem;
    cursor: pointer;
    color: white;
    background: none;
    border: none;
  }
  .modal-body {
    padding: 1.5rem 2rem;
  }
  .form-group {
    margin-bottom: 1.3rem;
  }
  label.form-label {
    display: block;
    margin-bottom: 0.4rem;
    font-weight: 600;
    color: #444;
  }
  input.form-input, select.form-input {
    width: 100%;
    padding: 0.7rem 1rem;
    border: 1px solid #ddd;
    border-radius: 5px;
    font-size: 1rem;
  }
  input.form-input:focus, select.form-input:focus {
    outline: none;
    border-color: #1a56db;
    box-shadow: 0 0 0 3px rgba(29,78,216,0.15);
  }
  .quantity-control {
    display: flex;
    align-items: center;
    gap: 0.7rem;
  }
  .quantity-btn {
    width: 38px;
    height: 38px;
    border-radius: 50%;
    border: none;
    background: #e5e7eb;
    font-size: 1.3rem;
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    user-select: none;
  }
  .quantity-btn:hover {
    background: #d1d5db;
  }
  .quantity-input {
    width: 65px;
    text-align: center;
    font-size: 1.1rem;
    border: 1px solid #ddd;
    border-radius: 5px;
    padding: 0.4rem;
    pointer-events: none;
  }
  .funny-message {
    color: #dc2626;
    font-weight: bold;
    margin-top: 0.5rem;
    display: none;
  }
  .submit-button {
    width: 100%;
    padding: 1rem 1.5rem;
    font-size: 1.1rem;
    font-weight: bold;
    background-color: #1a56db;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    transition: background-color 0.3s;
  }
  .submit-button:hover {
    background-color: #1e40af;
  }
  .message {
    margin-top: 1rem;
    padding: 1rem;
    border-radius: 5px;
    font-weight: bold;
    text-align: center;
    display: none;
  }
  .success-message {
    background: #dcfce7;
    color: #166534;
    border: 1px solid #bbf7d0;
  }
  .error-message {
    background: #fee2e2;
    color: #b91c1c;
    border: 1px solid #fecaca;
  }
  @media (max-width: 768px) {
    .products-grid {
      grid-template-columns: repeat(auto-fill, minmax(200px,1fr));
      padding: 0 1rem;
      gap: 1.5rem;
    }
    .product-image {
      height: 250px;
    }
    .logo {
      font-size: 2rem;
    }
    .welcome {
      font-size: 1.2rem;
    }
    .tagline {
      font-size: 1rem;
    }
  }
</style>
</head>
<body>

<header>
  <div class="logo">EzzineStyle</div>
  <div class="welcome">مرحباً بكم في متجر EzzineStyle</div>
  <div class="tagline">جودة عالية - تصميمات مميزة - أسعار تنافسية</div>
</header>

<!-- أقسام المنتجات -->
<h2 class="section-title">قسم الأنمي</h2>
<div id="anime-section" class="products-grid"></div>

<h2 class="section-title">قسم الفوت</h2>
<div id="foot-section" class="products-grid"></div>

<h2 class="section-title">قسم الراب</h2>
<div id="rap-section" class="products-grid"></div>

<h2 class="section-title">قسم الإكسترا (السكول)</h2>
<div id="extra-section" class="products-grid"></div>

<!-- نافذة الطلب -->
<div id="order-modal" class="modal" role="dialog" aria-modal="true" aria-labelledby="modal-title">
  <div class="modal-content">
    <div class="modal-header">
      <h2 id="modal-title" class="modal-title">اكمل طلبك</h2>
      <button type="button" class="close-modal" aria-label="إغلاق">&times;</button>
    </div>
    <div class="modal-body">
      <form id="order-form" novalidate>
        <input type="hidden" id="model" />
        <input type="hidden" id="productType" />
        <div class="form-group">
          <label for="fullname" class="form-label">الاسم الكامل</label>
          <input type="text" id="fullname" class="form-input" required />
        </div>
        <div class="form-group">
          <label for="phone" class="form-label">رقم الهاتف</label>
          <input type="tel" id="phone" class="form-input" required pattern="[\d\s\+\-]+" />
        </div>
        <div class="form-group">
          <label for="state" class="form-label">الولاية</label>
          <select id="state" class="form-input" required>
            <option value="">اختر الولاية</option>
          </select>
        </div>
        <div class="form-group">
          <label for="municipality" class="form-label">البلدية</label>
          <select id="municipality" class="form-input" required disabled>
            <option value="">اختر البلدية</option>
          </select>
        </div>
        <div class="form-group">
          <label for="size" class="form-label">المقاس</label>
          <select id="size" class="form-input" required>
            <option value="">اختر المقاس</option>
            <option value="S">S</option>
            <option value="M">M</option>
            <option value="L">L</option>
            <option value="XL">XL</option>
            <option value="XXL">XXL</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">الكمية</label>
          <div class="quantity-control">
            <button type="button" id="decrease-qty" class="quantity-btn" aria-label="نقص الكمية">-</button>
            <input type="number" id="quantity" class="quantity-input" value="1" min="1" readonly aria-live="polite" />
            <button type="button" id="increase-qty" class="quantity-btn" aria-label="زيادة الكمية">+</button>
          </div>
          <div id="funny-message" class="funny-message" aria-live="polite">راك منيتك صاحبي 😂</div>
        </div>
        <button type="submit" class="submit-button">إرسال الطلب</button>
        <div id="success-message" class="message success-message" style="display:none">
          EzzineStyle تشكركم على الطلب 💜
        </div>
        <div id="error-message" class="message error-message" style="display:none">
          حدثت مشكلة، حاول مرة أخرى
        </div>
      </form>
    </div>
  </div>
</div>

<a href="https://wa.me/213781059339" target="_blank" class="whatsapp-button" aria-label="واتساب">
  <img src="https://cdn-icons-png.flaticon.com/512/1384/1384023.png" alt="واتساب" class="whatsapp-icon" />
</a>

<script>
  // بيانات الولايات والبلديات (مقتطف، أضف باقي الولايات حسب الحاجة)
  const algeriaStates = [
    {name:"أدرار",municipalities:["أدرار","تامست","شروين","رقان","إن زغمير","تيت","قصر قدور","تسابيت","تيميمون","أولاد السعيد","زاوية كنتة","أولف","تيمقطن","تامنطيط","فنوغيل","تنركوك","دلدول","سالي","اقبلي","أولاد أحمد تيمي","بودة","سبع"]},
    {name:"الشلف",municipalities:["الشلف","تنس","بنايرية","الكريمية","تاجنة","تاقريت","بني حواء","صبحة","حرشون","أولاد فارس","سيدي عكاشة","بوقادير","بني راشد","تلعصة","الهرنفة","وادي قوسين","الظهر","أولاد عباس","السنجاس","الزبوجة","وادي سلي"]},
    // أكمل باقي الولايات والبلديات هنا
  ];

  // بيانات المنتجات مع تصنيفها حسب بادئة اسم الصورة
  const products = [
    // anime (t1, t2, ...)
    {id:"t1", model:"Solo Leaving", image:"t1 solo leaving.png", section:"anime"},
    {id:"t2", model:"Goku", image:"t2 goku.png", section:"anime"},
    {id:"t2-2", model:"Goku 2", image:"t2 goku 2.png", section:"anime"},
    {id:"t3", model:"Hisoka", image:"t3 hisoka.png", section:"anime"},
    {id:"t3-2", model:"Hisoka 2", image:"t3 hisoka 2.png", section:"anime"},
    {id:"t4", model:"Kokoshibo", image:"t4 kokoshibo.png", section:"anime"},
    {id:"t4-2", model:"Kokoshibo 2", image:"t4 kokoshibo 2.png", section:"anime"},
    {id:"t5", model:"Whitebeard", image:"t5 whitebeard.png", section:"anime"},
    {id:"t5-2", model:"Whitebeard 2", image:"t5 whitebeard 2.png", section:"anime"},
    {id:"t6", model:"Zoro", image:"t6 zoro 2.png", section:"anime"},
    {id:"t7", model:"Zoro2", image:"t7 zoro2.png", section:"anime"},
    {id:"t7-2", model:"Zoro2 2", image:"t7 zoro2 2.png", section:"anime"},
    {id:"t14", model:"The Last of Us Mode2", image:"t14 the last of us mode2.png", section:"anime"},
    {id:"t14-2", model:"The Last of Us Mode2 2", image:"t14 the last of us mode2 2.png", section:"anime"},
    {id:"t15", model:"Sheep", image:"t15 sheep.png", section:"anime"},
    // foot (tf1, tf2, ...)
    {id:"tf1", model:"CR7", image:"tf1 cr7.png", section:"foot"},
    {id:"tf1-2", model:"CR7 2", image:"tf1 cr7 2.png", section:"foot"},
    {id:"tf2", model:"Real Madrid", image:"tf2 real madrid.png", section:"foot"},
    {id:"tf2-2", model:"Real Madrid 2", image:"tf2 real madrid 2.png", section:"foot"},
    {id:"tf3", model:"Real Mod", image:"tf3 real mod.png", section:"foot"},
    {id:"tf3-2", model:"Real Mod 2", image:"tf3 real mod 2.png", section:"foot"},
    // rap (tr1, tr2, ...)
    {id:"tr1", model:"Billie", image:"tr1 billlie.png", section:"rap"},
    {id:"tr1-2", model:"Billie 2", image:"tr1 billie 2.png", section:"rap"},
    {id:"tr2", model:"Eminem", image:"tr2 eminem.png", section:"rap"},
    {id:"tr2-2", model:"Eminem 2", image:"tr2 eminem 2.png", section:"rap"},
    {id:"tr3", model:"La Mass", image:"tr3 la mass.png", section:"rap"},
    {id:"tr3-2", model:"La Mass 2", image:"tr3 la mass 2.png", section:"rap"},
    {id:"tr4", model:"Dak", image:"tr4 dak.png", section:"rap"},
    {id:"tr4-2", model:"Dak 2", image:"tr4 dak 2.png", section:"rap"},
    {id:"tr5", model:"Toto", image:"tr5 toto.png", section:"rap"},
    {id:"tr6", model:"Skorp", image:"tr6 skorp.png", section:"rap"},
    {id:"tr6-2", model:"Skorp 2", image:"tr6 skorp 2.png", section:"rap"},
    // extra (te1, te2, ...)
    {id:"te1", model:"Constantine B", image:"te1 constontine B.png", section:"extra"},
    {id:"te2", model:"Constantine W", image:"te2 constontine W.png", section:"extra"},
    {id:"te3", model:"Chill", image:"te3 chill.png", section:"extra"},
    {id:"te4", model:"Skull", image:"te4 skull.png", section:"extra"},
    {id:"te5", model:"Boy", image:"te5 boy.png", section:"extra"},
    {id:"te6", model:"Dragon", image:"te6 dragon.png", section:"extra"},
    {id:"te7", model:"My Rules", image:"te7 my rules.png", section:"extra"},
    {id:"te8", model:"GTA", image:"te8 gta.png", section:"extra"},
    {id:"te9", model:"Olympus", image:"te9 olmpus.png", section:"extra"},
    {id:"te10", model:"Save Them", image:"te10 save them.png", section:"extra"},
    {id:"te11", model:"Stranger Things", image:"te11 stranger things.png", section:"extra"},
    {id:"te11-2", model:"Stranger Things 2", image:"te11 stranger things 2.png", section:"extra"},
    {id:"te12", model:"The Last of Us", image:"te12 the last of us.png", section:"extra"},
    {id:"te12-2", model:"The Last of Us 2", image:"te12 the last of us 2.png", section:"extra"},
    {id:"te13", model:"The Boys", image:"te13 the boys.png", section:"extra"},
    {id:"te13-2", model:"The Boys 2", image:"te13 the boys 2.png", section:"extra"}
  ];

  // أسعار حسب النوع
  const prices = {
    Regular: "2700 دج",
    Oversize: "2900 دج"
  };

  document.addEventListener("DOMContentLoaded", () => {
    const animeSection = document.getElementById("anime-section");
    const footSection = document.getElementById("foot-section");
    const rapSection = document.getElementById("rap-section");
    const extraSection = document.getElementById("extra-section");

    const modal = document.getElementById("order-modal");
    const closeModalBtn = document.querySelector(".close-modal");
    const form = document.getElementById("order-form");
    const successMessage = document.getElementById("success-message");
    const errorMessage = document.getElementById("error-message");
    const stateSelect = document.getElementById("state");
    const municipalitySelect = document.getElementById("municipality");
    const quantityInput = document.getElementById("quantity");
    const decreaseBtn = document.getElementById("decrease-qty");
    const increaseBtn = document.getElementById("increase-qty");
    const funnyMessage = document.getElementById("funny-message");
    const modelInput = document.getElementById("model");
    const productTypeInput = document.getElementById("productType");
    const typeSelect = document.getElementById("type");

    // دالة لإنشاء بطاقة منتج
    function createProductCard(product) {
      const card = document.createElement("div");
      card.className = "product-card";
      card.innerHTML = `
        <img src="${product.image}" alt="${product.model}" class="product-image" onerror="this.src='https://via.placeholder.com/300x400?text=EzzineStyle'"/>
        <div class="product-info">
          <div class="product-model">${product.model}</div>
          <div class="type-switch">
            <span class="type-option regular selected" data-type="Regular">${prices.Regular}</span>
            <span class="type-option oversize" data-type="Oversize">${prices.Oversize}</span>
          </div>
          <div class="product-price">${prices.Regular}</div>
          <button class="buy-button">اشترِ الآن</button>
        </div>
      `;

      // التحكم في اختيار النوع والسعر
      const typeOptions = card.querySelectorAll(".type-option");
      const priceDiv = card.querySelector(".product-price");
      let selectedType = "Regular";
      typeOptions.forEach(opt => {
        opt.addEventListener("click", () => {
          typeOptions.forEach(o => o.classList.remove("selected"));
          opt.classList.add("selected");
          priceDiv.textContent = prices[opt.dataset.type];
          selectedType = opt.dataset.type;
        });
      });

      // فتح نافذة الطلب عند الضغط على زر الشراء
      card.querySelector(".buy-button").addEventListener("click", () => {
        modelInput.value = product.model;
        productTypeInput.value = selectedType;
        typeSelect.value = selectedType;
        quantityInput.value = 1;
        form.reset();
        stateSelect.value = "";
        municipalitySelect.innerHTML = '<option value="">اختر البلدية</option>';
        municipalitySelect.disabled = true;
        funnyMessage.style.display = "none";
        successMessage.style.display = "none";
        errorMessage.style.display = "none";
        modal.classList.add("show");
      });

      return card;
    }

    // عرض المنتجات في الأقسام المناسبة
    products.forEach(product => {
      let section;
      switch(product.section) {
        case "anime": section = animeSection; break;
        case "foot": section = footSection; break;
        case "rap": section = rapSection; break;
        case "extra": section = extraSection; break;
      }
      if(section) {
        section.appendChild(createProductCard(product));
      }
    });

    // تعبئة الولايات
    algeriaStates.forEach(state => {
      const option = document.createElement("option");
      option.value = state.name;
      option.textContent = state.name;
      stateSelect.appendChild(option);
    });

    // تحديث البلديات عند اختيار الولاية
    stateSelect.addEventListener("change", () => {
      municipalitySelect.innerHTML = '<option value="">اختر البلدية</option>';
      municipalitySelect.disabled = true;
      if(stateSelect.value){
        const selected = algeriaStates.find(s => s.name === stateSelect.value);
        if(selected){
          selected.municipalities.forEach(mun => {
            const opt = document.createElement("option");
            opt.value = mun;
            opt.textContent = mun;
            municipalitySelect.appendChild(opt);
          });
          municipalitySelect.disabled = false;
        }
      }
    });

    // التحكم في الكمية
    decreaseBtn.addEventListener("click", () => {
      let val = parseInt(quantityInput.value);
      if(val > 1){
        quantityInput.value = val - 1;
        funnyMessage.style.display = "none";
      }
    });
    increaseBtn.addEventListener("click", () => {
      let val = parseInt(quantityInput.value);
      if(val < 30){
        quantityInput.value = val + 1;
        funnyMessage.style.display = "none";
      } else {
        funnyMessage.style.display = "block";
      }
    });

    // إغلاق النافذة
    closeModalBtn.addEventListener("click", () => {
      modal.classList.remove("show");
    });
    window.addEventListener("click", e => {
      if(e.target === modal){
        modal.classList.remove("show");
      }
    });

    // إرسال الطلب عبر Formspree
    form.addEventListener("submit", async e => {
      e.preventDefault();
      successMessage.style.display = "none";
      errorMessage.style.display = "none";

      if(!form.checkValidity()){
        form.reportValidity();
        return;
      }

      const data = {
        fullname: document.getElementById("fullname").value.trim(),
        phone: document.getElementById("phone").value.trim(),
        state: stateSelect.value,
        municipality: municipalitySelect.value,
        size: document.getElementById("size").value,
        type: typeSelect.value,
        quantity: quantityInput.value,
        model: modelInput.value
      };

      try {
        const response = await fetch("https://formspree.io/f/abgamer0177", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(data)
        });
        if(response.ok){
          successMessage.style.display = "block";
          errorMessage.style.display = "none";
          form.reset();
          municipalitySelect.disabled = true;
          quantityInput.value = 1;
          setTimeout(() => {
            successMessage.style.display = "none";
            modal.classList.remove("show");
          }, 3000);
        } else {
          throw new Error("خطأ في الإرسال");
        }
      } catch {
        errorMessage.style.display = "block";
        successMessage.style.display = "none";
      }
    });
  });
</script>

</body>
</html>
